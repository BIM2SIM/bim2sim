

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aggregations &mdash; bim2sim  0.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=7ab3649f" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=01f34227"></script>
      <script src="../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Decisions" href="decisions.html" />
    <link rel="prev" title="Finder" href="finder.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/b2s_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../big-picture.html">Big Picture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide.html">User-Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simulation-guide.html">Simulation-Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../advanced-user-guide.html">Advanced User-Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../concepts.html">Concepts</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="project.html">Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="sim_settings.html">Simulation settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="domains.html">Domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="playground.html">Playground</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="tasks.html">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="elements.html">Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="attribute.html">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="finder.html">Finder</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Aggregations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#what-are-aggregations-used-for">What are aggregations used for?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-are-aggregations-implemented">How are aggregations implemented?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#improvements">Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#what-aggregations-exist-currently">What aggregations exist currently:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="decisions.html">Decisions</a></li>
<li class="toctree-l3"><a class="reference internal" href="decisions.html#yielding">Yielding</a></li>
<li class="toctree-l3"><a class="reference internal" href="logging.html">Logging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../project-file-structure.html">Project File Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../writing-your-own-plugin.html">Writing your own bim2sim Plugin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-guide.html">Developer-Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code/modules.html">bim2sim</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">bim2sim </a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../advanced-user-guide.html">Advanced User-Guide</a></li>
          <li class="breadcrumb-item"><a href="../concepts.html">Concepts</a></li>
      <li class="breadcrumb-item active">Aggregations</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/advanced-user-guide/concepts/aggregations.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="aggregations">
<h1>Aggregations<a class="headerlink" href="#aggregations" title="Link to this heading"></a></h1>
<section id="what-are-aggregations-used-for">
<h2>What are aggregations used for?<a class="headerlink" href="#what-are-aggregations-used-for" title="Link to this heading"></a></h2>
<p>Aggregations try to reduce the number of elements that will be exported to
modelica in a way that the exported elements fit the existing modelica models.
For more information have a look at the docs for
<a class="reference internal" href="../../simulation-guide/simulation-types.html#id1"><span class="std std-ref">Hydraulic Network</span></a>. You can select which aggregations you
want to apply in the [workflow_settings_concept](workflow settings). The
selected aggregations are called inside the <a class="reference internal" href="../../code/bim2sim.tasks.hvac.html#bim2sim.tasks.hvac.reduce.Reduce" title="bim2sim.tasks.hvac.reduce.Reduce"><span class="xref myst py py-class">Reduce</span></a> task.</p>
</section>
<section id="how-are-aggregations-implemented">
<h2>How are aggregations implemented?<a class="headerlink" href="#how-are-aggregations-implemented" title="Link to this heading"></a></h2>
<p>Aggregations are created based the <a class="reference internal" href="../../code/bim2sim.elements.graphs.html#bim2sim.elements.graphs.hvac_graph.HvacGraph" title="bim2sim.elements.graphs.hvac_graph.HvacGraph"><span class="xref myst py py-class">HvacGraph</span></a> of the hydraulic
network. The basic concept is that we are looking for elements which fit the
corresponding aggregation <a class="reference internal" href="../../code/bim2sim.elements.aggregation.html#bim2sim.elements.aggregation.bps_aggregations.AggregatedThermalZone.find_matches" title="bim2sim.elements.aggregation.bps_aggregations.AggregatedThermalZone.find_matches"><span class="xref myst py py-meth">Find Matches</span></a>.</p>
<section id="find-matches">
<h3>Find Matches<a class="headerlink" href="#find-matches" title="Link to this heading"></a></h3>
<p id="find-matches-aggr">The <code class="docutils literal notranslate"><span class="pre">find_matches</span></code> method is used to identify the corresponding aggregation
inside the given <a class="reference internal" href="../../code/bim2sim.elements.graphs.html#bim2sim.elements.graphs.hvac_graph.HvacGraph" title="bim2sim.elements.graphs.hvac_graph.HvacGraph"><span class="xref myst py py-class">HvacGraph</span></a>. It returns a subgraph that holds only
the elements that are part of the aggregation.</p>
</section>
<section id="get-edge-ports">
<h3>Get Edge Ports<a class="headerlink" href="#get-edge-ports" title="Link to this heading"></a></h3>
<p id="get-edge-ports-aggr">The <code class="docutils literal notranslate"><span class="pre">get_edge_ports</span></code> method returns the “most outer ports” of the aggregation.
These are the ports that are connection the subgraph of the aggregation with the
rest of the <a class="reference internal" href="../../code/bim2sim.elements.graphs.html#bim2sim.elements.graphs.hvac_graph.HvacGraph" title="bim2sim.elements.graphs.hvac_graph.HvacGraph"><span class="xref myst py py-class">HvacGraph</span></a>.</p>
</section>
<section id="replacement">
<h3>Replacement<a class="headerlink" href="#replacement" title="Link to this heading"></a></h3>
<p id="replacement-aggr">The <code class="docutils literal notranslate"><span class="pre">get_replacement_mapping</span></code> method creates a mapping dict that holds the
information which ports in the <a class="reference internal" href="../../code/bim2sim.elements.graphs.html#bim2sim.elements.graphs.hvac_graph.HvacGraph" title="bim2sim.elements.graphs.hvac_graph.HvacGraph"><span class="xref myst py py-class">HvacGraph</span></a> should be deleted and
which ones should be replaced by the new ports of the aggregation.</p>
</section>
<section id="merge-graph">
<h3>Merge graph<a class="headerlink" href="#merge-graph" title="Link to this heading"></a></h3>
<p>Finaly the <code class="docutils literal notranslate"><span class="pre">merge</span></code> method of the <a class="reference internal" href="../../code/bim2sim.elements.graphs.html#bim2sim.elements.graphs.hvac_graph.HvacGraph" title="bim2sim.elements.graphs.hvac_graph.HvacGraph"><span class="xref myst py py-class">HvacGraph</span></a> is called and uses the
found matches in form of the subgraphs from <code class="docutils literal notranslate"><span class="pre">find_matches</span></code> and the mapping table
from <code class="docutils literal notranslate"><span class="pre">get_replacement_mapping</span></code> to adjust the input the aggregation into
the <a class="reference internal" href="../../code/bim2sim.elements.graphs.html#bim2sim.elements.graphs.hvac_graph.HvacGraph" title="bim2sim.elements.graphs.hvac_graph.HvacGraph"><span class="xref myst py py-class">HvacGraph</span></a>.</p>
</section>
</section>
<section id="improvements">
<h2>Improvements<a class="headerlink" href="#improvements" title="Link to this heading"></a></h2>
<p>Currently, we follow a common guideline but the aggregations are still
very different in the way they are implemented. We want to improve this in the
feature to increase readability, modularity, maintainability and reusability.
If you want to help us, everything related is documented in issue #243. # TODO
GITHUB LINK</p>
</section>
<section id="what-aggregations-exist-currently">
<h2>What aggregations exist currently:<a class="headerlink" href="#what-aggregations-exist-currently" title="Link to this heading"></a></h2>
<p>Currently, we implemented the following aggregations, please have a look at the
corresponding documentation for more details.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../code/bim2sim.elements.aggregation.html#bim2sim.elements.aggregation.hvac_aggregations.PipeStrand" title="bim2sim.elements.aggregation.hvac_aggregations.PipeStrand"><span class="xref myst py py-class">PipeStrand</span></a></p></li>
<li><p><a class="reference internal" href="#AggregatedPipeFitting"><span class="xref myst">AggregatedPipeFitting</span></a></p></li>
<li><p><a class="reference internal" href="../../code/bim2sim.elements.aggregation.html#bim2sim.elements.aggregation.hvac_aggregations.UnderfloorHeating" title="bim2sim.elements.aggregation.hvac_aggregations.UnderfloorHeating"><span class="xref myst py py-class">UnderfloorHeating</span></a></p></li>
<li><p><a class="reference internal" href="../../code/bim2sim.elements.aggregation.html#bim2sim.elements.aggregation.hvac_aggregations.ParallelPump" title="bim2sim.elements.aggregation.hvac_aggregations.ParallelPump"><span class="xref myst py py-class">ParallelPump</span></a></p></li>
<li><p><a class="reference internal" href="#ParallelSpaceHeater"><span class="xref myst">ParallelSpaceHeater</span></a></p></li>
<li><p><a class="reference internal" href="../../code/bim2sim.elements.aggregation.html#bim2sim.elements.aggregation.hvac_aggregations.Consumer" title="bim2sim.elements.aggregation.hvac_aggregations.Consumer"><span class="xref myst py py-class">Consumer</span></a></p></li>
<li><p><a class="reference internal" href="../../code/bim2sim.elements.aggregation.html#bim2sim.elements.aggregation.hvac_aggregations.ConsumerHeatingDistributorModule" title="bim2sim.elements.aggregation.hvac_aggregations.ConsumerHeatingDistributorModule"><span class="xref myst py py-class">ConsumerHeatingDistributorModule</span></a></p></li>
<li><p><a class="reference internal" href="../../code/bim2sim.elements.aggregation.html#bim2sim.elements.aggregation.bps_aggregations.AggregatedThermalZone" title="bim2sim.elements.aggregation.bps_aggregations.AggregatedThermalZone"><span class="xref myst py py-class">AggregatedThermalZone</span></a></p></li>
<li><p><a class="reference internal" href="../../code/bim2sim.elements.aggregation.html#bim2sim.elements.aggregation.hvac_aggregations.GeneratorOneFluid" title="bim2sim.elements.aggregation.hvac_aggregations.GeneratorOneFluid"><span class="xref myst py py-class">GeneratorOneFluid</span></a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="finder.html" class="btn btn-neutral float-left" title="Finder" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="decisions.html" class="btn btn-neutral float-right" title="Decisions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, RWTH Aachen University, EBC &amp; E3D; ROM Technik GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>