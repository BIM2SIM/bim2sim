<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PluginTemplate &mdash; bim2sim  0.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PluginTEASER" href="PluginTEASER.html" />
    <link rel="prev" title="User-Guide" href="../user-guide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/b2s_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../big-picture.html">Big Picture</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../user-guide.html">User-Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">PluginTemplate</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-to-install">How to install?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#step-by-step">Step by step</a></li>
<li class="toctree-l4"><a class="reference internal" href="#trouble-shooting">Trouble Shooting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#docker">Docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="#test-installation">Test installation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-create-a-project">How to create a project?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#console">Console</a></li>
<li class="toctree-l4"><a class="reference internal" href="#script">Script</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-load-an-ifc-file">How to load an IFC file?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-configure-my-project">How to configure my project?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#simulation-settings">Simulation settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration-file">Configuration file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-tasks">Default tasks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#additional-templates">Additional templates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-run-the-project">How to run the project?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-run-the-simulation">How to run the simulation?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-analyze-the-project">How to analyze the project?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#what-kind-of-results-exist">What kind of results exist?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#what-programs-tools-to-use-for-further-analysis">What programs/tools to use for further analysis?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="PluginTEASER.html">PluginTEASER</a></li>
<li class="toctree-l2"><a class="reference internal" href="PluginEnergyPlus.html">PluginEnergyPlus</a></li>
<li class="toctree-l2"><a class="reference internal" href="PluginAixLib.html">PluginAixLib</a></li>
<li class="toctree-l2"><a class="reference internal" href="PluginLCA.html">PluginLCA</a></li>
<li class="toctree-l2"><a class="reference internal" href="PluginCFD.html">PluginCFD</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../simulation-guide.html">Simulation-Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced-user-guide.html">Advanced User-Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer-guide.html">Developer-Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code/modules.html">bim2sim</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">bim2sim </a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../user-guide.html">User-Guide</a></li>
      <li class="breadcrumb-item active">PluginTemplate</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/user-guide/PluginTemplate.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="plugintemplate">
<h1>PluginTemplate<a class="headerlink" href="#plugintemplate" title="Permalink to this heading"></a></h1>
<p>In this chapter it will explained howto install the Base of the <code class="docutils literal notranslate"><span class="pre">bim2sim</span></code>
framework and first steps of the usage.</p>
<p><code class="docutils literal notranslate"><span class="pre">bim2sim</span></code> is divided into a base library and plugins.
For further information of the specific plugins:</p>
<p><a class="reference internal" href="PluginTEASER.html"><span class="doc std std-doc">TEASER</span></a>, <a class="reference internal" href="PluginEnergyPlus.html"><span class="doc std std-doc">EnergyPlus</span></a>, <a class="reference internal" href="PluginAixLib.html"><span class="doc std std-doc">AixLib</span></a>,
<a class="reference internal" href="#PluginHKESIM"><span class="xref myst">HKESIM</span></a>, <a class="reference internal" href="PluginLCA.html"><span class="doc std std-doc">LCA</span></a>, <a class="reference internal" href="PluginCFD.html"><span class="doc std std-doc">CFD</span></a></p>
<p>The base installation of the <code class="docutils literal notranslate"><span class="pre">bim2sim</span></code> framework includes a generic Base-Plugin.
The Base-Plugin is a plugin, which includes generic features and structure. This
plugin is used as general starting point without any third party dependencies.
So it is a good starting point for development of own plugins or as test
environment for debugging.</p>
<section id="how-to-install">
<h2>How to install?<a class="headerlink" href="#how-to-install" title="Permalink to this heading"></a></h2>
<section id="step-by-step">
<h3>Step by step<a class="headerlink" href="#step-by-step" title="Permalink to this heading"></a></h3>
<p>We will first guide you through the process how
to install <code class="docutils literal notranslate"><span class="pre">bim2sim</span></code> base library and afterwards how to install the plugins.
As some requirements for core functionality of <code class="docutils literal notranslate"><span class="pre">bim2sim</span></code> are not available via
PyPi but only via Anaconda an installation only via PyPi is sadly not possible
for now.
For now the easiest way to install <code class="docutils literal notranslate"><span class="pre">bim2sim</span></code> is the by</p>
<ol class="arabic simple">
<li><p>creating an anaconda environment</p></li>
<li><p>clone <code class="docutils literal notranslate"><span class="pre">bim2sim</span></code> GitHub repository</p></li>
<li><p>install pip requirements</p></li>
<li><p>install conda requirements</p></li>
<li><p>add base libraray and plugins to <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></p></li>
</ol>
<p>We will guide you through the process now.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># create fresh python environment with conda </span>
conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>bim2sim<span class="w"> </span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.10

<span class="c1"># activate your environment</span>
conda<span class="w"> </span>activate<span class="w"> </span>bim2sim

<span class="c1"># clone bim2sim repository (you can also use SSH if you prefer)</span>
<span class="c1"># the option &quot;--recurse-submodules&quot; is needed to load submodules </span>
git<span class="w"> </span>clone<span class="w"> </span>--recurse-submodules<span class="w"> </span>https://github.com/BIM2SIM/bim2sim.git
<span class="c1"># change into bim2sim folder</span>
<span class="nb">cd</span><span class="w"> </span>bim2sim
<span class="c1"># use of development branch is recommended, as main branch is currently not updated regulary</span>
git<span class="w"> </span>checkout<span class="w"> </span>development


<span class="c1"># install pip requirements</span>
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt

<span class="c1"># install conda packages (OCC not available via pip)</span>
conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>pythonocc-core<span class="o">=</span><span class="m">7</span>.7.0
</pre></div>
</div>
<p>After this we need to add bim2sim to the <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> variable. For Windows, we
recommend to use the graphical user interface, but you can also use the shell.</p>
<section id="important-for-linux">
<h4><span style="color:red">Important for Linux.</span><a class="headerlink" href="#important-for-linux" title="Permalink to this heading"></a></h4>
<p>Keep in mind that this change will only persist for the current session.
If you want to make it permanent, you can add the above line to your shell’s
configuration file (e.g., .bashrc or .bash_profile for Bash) so that it’s
executed every time you start a new shell session.
For Windows when you want to add multiple directorys to <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> you need to
do it all in one command.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Linux</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span><span class="nv">$PYTHONPATH</span>:&lt;your_git_bim2sim_repo_path&gt;
<span class="c1"># Windows</span>
setx<span class="w"> </span>PYTHONPATH<span class="w"> </span>%PYTHONPATH%<span class="p">;</span>&lt;your_git_bim2sim_repo_path&gt;
</pre></div>
</div>
<p>Hint:
We will improve this process by our own anaconda image soon.</p>
</section>
</section>
<section id="trouble-shooting">
<h3>Trouble Shooting<a class="headerlink" href="#trouble-shooting" title="Permalink to this heading"></a></h3>
<p>For your installation, your system needs a C++ compiler. If you do not have C++ build tools installed anyways, please download the developer tools here: https://visualstudio.microsoft.com/de/visual-cpp-build-tools/ and install desktop development tools.</p>
<p>If you get in trouble with building a wheel for sparse-dot-topn-for-blocks, this solution may help: ParticularMiner/sparse_dot_topn_for_blocks#3 (comment).</p>
<p>For more plugin-specific trouble shooting please have a look at the individual installation guides for the plugins.</p>
</section>
<section id="docker">
<h3>Docker<a class="headerlink" href="#docker" title="Permalink to this heading"></a></h3>
<p>We already create docker images for each the base <code class="docutils literal notranslate"><span class="pre">bim2sim</span></code> tool as for every
Plugin, but currently these are only available through our own registry. You can
still build the images yourself based on the existing Dockerfiles. As our
current structure is a bit complicated, please have a look at the explanation of
the <a class="reference internal" href="../developer-guide/docker-structure.html#docker-structure"><span class="std std-ref">Docker Structure</span></a>.</p>
<p>We will release the images on DockerHub soon to make them accessible for
everyone (see <a class="reference external" href="https://github.com/BIM2SIM/bim2sim/issues/452">issuue 452</a>).</p>
</section>
<section id="test-installation">
<h3>Test installation<a class="headerlink" href="#test-installation" title="Permalink to this heading"></a></h3>
<p>If all worked well you should be able to start using bim2sim. Try</p>
<p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">bim2sim</span> <span class="pre">-h</span></code></p>
<p>(be aware your working directory should be your_git_bim2sim_repo)
It this command returns the help documentation, please make your first steps with <code class="docutils literal notranslate"><span class="pre">bim2sim</span></code>.</p>
</section>
</section>
<section id="how-to-create-a-project">
<h2>How to create a project?<a class="headerlink" href="#how-to-create-a-project" title="Permalink to this heading"></a></h2>
<p>You can either use <code class="docutils literal notranslate"><span class="pre">bim2sim</span></code> directly from console or include it in your scripts.</p>
<section id="console">
<h3>Console<a class="headerlink" href="#console" title="Permalink to this heading"></a></h3>
<p>Start your favorite console and type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python -m bim2sim -h
</pre></div>
</div>
<p>to see all available commands.</p>
<p>Now it’s time to create your first project with bim2sim.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python bim2sim project create path/to/project -s teaser
</pre></div>
</div>
<p>will create a new project folder at <code class="docutils literal notranslate"><span class="pre">path/to/project</span></code> and set it up for a
simulation with <a class="reference internal" href="#teaser"><span class="xref myst">TEASER</span></a> (see <a class="reference internal" href="../code/bim2sim.plugins.html#module-bim2sim.plugins" title="bim2sim.plugins"><code class="xref myst py py-mod docutils literal notranslate"><span class="pre">plugins</span></code></a> for more options).
Now open the newly created project folder and put the *.ifc file you wish to
process into the subfolder <code class="docutils literal notranslate"><span class="pre">ifc</span></code>. Alternatively you could add the
option <code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">path/to/ifc</span></code> to the command above, which would copy the ifc for you.</p>
<p>If all is set up correctly, run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python bim2sim load path/to/project
</pre></div>
</div>
<p>to load and run an existing project. Then follow the instructions from your
console. When you are done, you can inspect the results from the <code class="docutils literal notranslate"><span class="pre">/results</span></code> folder of
your project.</p>
</section>
<section id="script">
<h3>Script<a class="headerlink" href="#script" title="Permalink to this heading"></a></h3>
<p>To include bim2sim in your scripts start with something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bim2sim</span> <span class="kn">import</span> <span class="n">Project</span>
<span class="kn">from</span> <span class="nn">bim2sim.log</span> <span class="kn">import</span> <span class="n">default_logging_setup</span>

<span class="n">default_logging_setup</span><span class="p">()</span>  <span class="c1"># call this first or do a custom logging setup</span>

<span class="n">project_path</span> <span class="o">=</span> <span class="s1">&#39;path/to/project&#39;</span>
<span class="n">ifc_path</span> <span class="o">=</span> <span class="s1">&#39;path/to/ifc&#39;</span>

<span class="k">if</span> <span class="n">Project</span><span class="o">.</span><span class="n">is_project_folder</span><span class="p">(</span><span class="n">project_path</span><span class="p">):</span>
    <span class="c1"># load project if existing</span>
    <span class="n">project</span> <span class="o">=</span> <span class="n">Project</span><span class="p">(</span><span class="n">project_path</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># else create a new one</span>
    <span class="n">project</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">project_path</span><span class="p">,</span> <span class="n">ifc_path</span><span class="p">,</span> <span class="s1">&#39;teaser&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>now you have multiple options to run the project and handle it’s decisions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Option 1: handle decisions manually</span>
<span class="k">for</span> <span class="n">bunch</span> <span class="ow">in</span> <span class="n">project</span><span class="o">.</span><span class="n">run</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">decision</span> <span class="ow">in</span> <span class="n">bunch</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">decision</span><span class="o">.</span><span class="n">question</span><span class="p">)</span>
        <span class="n">decision</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">42</span>  <span class="c1"># your logic goes here</span>

<span class="c1"># Option 2: handle decisions via console input</span>
<span class="kn">from</span> <span class="nn">bim2sim</span> <span class="kn">import</span> <span class="n">run_project</span><span class="p">,</span> <span class="n">ConsoleDecisionHandler</span>
<span class="n">run_project</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">ConsoleDecisionHandler</span><span class="p">())</span>

<span class="c1"># Option 3: write your own DecisionHandler and use it as in Option 2</span>
</pre></div>
</div>
<p>Details about <a class="reference internal" href="../code/bim2sim.kernel.decision.html#bim2sim.kernel.decision.decisionhandler.DecisionHandler" title="bim2sim.kernel.decision.decisionhandler.DecisionHandler"><span class="xref myst py py-class">DecisionHandlers</span></a>.</p>
</section>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h2>
<p>Please have also a look at <code class="docutils literal notranslate"><span class="pre">bim2sim/examples</span></code> which provide you some runnable
examples for PluginTEASER, PluginEnergyPlus and PluginLCA.</p>
</section>
<section id="how-to-load-an-ifc-file">
<h2>How to load an IFC file?<a class="headerlink" href="#how-to-load-an-ifc-file" title="Permalink to this heading"></a></h2>
</section>
<section id="how-to-configure-my-project">
<h2>How to configure my project?<a class="headerlink" href="#how-to-configure-my-project" title="Permalink to this heading"></a></h2>
<section id="simulation-settings">
<h3>Simulation settings<a class="headerlink" href="#simulation-settings" title="Permalink to this heading"></a></h3>
</section>
<section id="configuration-file">
<h3>Configuration file<a class="headerlink" href="#configuration-file" title="Permalink to this heading"></a></h3>
</section>
<section id="default-tasks">
<h3>Default tasks<a class="headerlink" href="#default-tasks" title="Permalink to this heading"></a></h3>
</section>
<section id="additional-templates">
<h3>Additional templates<a class="headerlink" href="#additional-templates" title="Permalink to this heading"></a></h3>
</section>
</section>
<section id="how-to-run-the-project">
<h2>How to run the project?<a class="headerlink" href="#how-to-run-the-project" title="Permalink to this heading"></a></h2>
</section>
<section id="how-to-run-the-simulation">
<h2>How to run the simulation?<a class="headerlink" href="#how-to-run-the-simulation" title="Permalink to this heading"></a></h2>
</section>
<section id="how-to-analyze-the-project">
<h2>How to analyze the project?<a class="headerlink" href="#how-to-analyze-the-project" title="Permalink to this heading"></a></h2>
<section id="what-kind-of-results-exist">
<h3>What kind of results exist?<a class="headerlink" href="#what-kind-of-results-exist" title="Permalink to this heading"></a></h3>
</section>
<section id="what-programs-tools-to-use-for-further-analysis">
<h3>What programs/tools to use for further analysis?<a class="headerlink" href="#what-programs-tools-to-use-for-further-analysis" title="Permalink to this heading"></a></h3>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../user-guide.html" class="btn btn-neutral float-left" title="User-Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="PluginTEASER.html" class="btn btn-neutral float-right" title="PluginTEASER" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, RWTH Aachen University, EBC &amp; E3D; ROM Technik GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>