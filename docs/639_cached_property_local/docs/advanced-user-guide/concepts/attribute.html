

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Attributes &mdash; bim2sim  0.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
      <script src="../../_static/doctools.js"></script>
      <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Finder" href="finder.html" />
    <link rel="prev" title="Elements" href="elements.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/b2s_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../big-picture.html">Big Picture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide.html">User-Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simulation-guide.html">Simulation-Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../advanced-user-guide.html">Advanced User-Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../concepts.html">Concepts</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="project.html">Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="sim_settings.html">Simulation settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="domains.html">Domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="playground.html">Playground</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="tasks.html">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="elements.html">Elements</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Attributes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#which-problem-is-addressed-by-attributes">Which problem is addressed by attributes?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#concept-how-does-it-work">Concept / How does it work?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-are-the-attributes-managed">How are the attributes managed?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#when-to-use-attributes">When to use <code class="docutils literal notranslate"><span class="pre">attributes</span></code>?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="finder.html">Finder</a></li>
<li class="toctree-l3"><a class="reference internal" href="aggregations.html">Aggregations</a></li>
<li class="toctree-l3"><a class="reference internal" href="decisions.html">Decisions</a></li>
<li class="toctree-l3"><a class="reference internal" href="decisions.html#yielding">Yielding</a></li>
<li class="toctree-l3"><a class="reference internal" href="enrichment.html">Enrichment</a></li>
<li class="toctree-l3"><a class="reference internal" href="logging.html">Logging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../project-file-structure.html">Project File Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../writing-your-own-plugin.html">Writing your own bim2sim Plugin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-guide.html">Developer-Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code/modules.html">bim2sim</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">bim2sim </a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../advanced-user-guide.html">Advanced User-Guide</a></li>
          <li class="breadcrumb-item"><a href="../concepts.html">Concepts</a></li>
      <li class="breadcrumb-item active">Attributes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/advanced-user-guide/concepts/attribute.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="attributes">
<span id="id1"></span><h1>Attributes<a class="headerlink" href="#attributes" title="Permalink to this heading"></a></h1>
<section id="which-problem-is-addressed-by-attributes">
<h2>Which problem is addressed by attributes?<a class="headerlink" href="#which-problem-is-addressed-by-attributes" title="Permalink to this heading"></a></h2>
<p>To parametrize simulation models, different types of parameters are needed. A
BIM model and specifically an IFC model offers multiple sources for the
requested information. Let’s assume that we need the <code class="docutils literal notranslate"><span class="pre">net_area</span></code> of a wall. This
information can either be obtained from:</p>
<ul class="simple">
<li><p>the official IFC specified <code class="docutils literal notranslate"><span class="pre">QuantitySet</span></code> <code class="docutils literal notranslate"><span class="pre">Qto_WallBaseQuantities/NetSideArea</span></code></p></li>
<li><p>the unofficial, but typical in ArchiCAD used <code class="docutils literal notranslate"><span class="pre">BaseQuantities'/NetSideArea</span></code></p></li>
<li><p>any other PropertySet where the BIM modeller might have stored the information</p></li>
<li><p>the calculation of the Space Boundary area of the wall</p></li>
<li><p>nowhere, because the information simply does not exist in the model (might not be the case for this example)</p></li>
</ul>
<p>To resolve this problem of multiple available sources and even parameters which
will be not included in the BIM model at all the <code class="docutils literal notranslate"><span class="pre">Attribute</span></code> system provides a solution.</p>
</section>
<section id="concept-how-does-it-work">
<h2>Concept / How does it work?<a class="headerlink" href="#concept-how-does-it-work" title="Permalink to this heading"></a></h2>
<p>Simulation required informations that are potentially available in the BIM model
are stored in an <a class="reference internal" href="#"><span class="std std-doc">Attribute</span></a> at the corresponding <a class="reference internal" href="#element"><span class="xref myst">element</span></a>.</p>
<p>E.g. the already mentioned <code class="docutils literal notranslate"><span class="pre">net_area</span></code> is  implemented by the following lines in
the the class <code class="docutils literal notranslate"><span class="pre">OuterWall</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="n">net_area</span> <span class="o">=</span> <span class="n">attribute</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span>
    <span class="n">default_ps</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Qto_WallBaseQuantities&quot;</span><span class="p">,</span> <span class="s2">&quot;NetSideArea&quot;</span><span class="p">),</span>
    <span class="n">functions</span><span class="o">=</span><span class="p">[</span><span class="n">BPSProduct</span><span class="o">.</span><span class="n">get_net_bound_area</span><span class="p">],</span>
    <span class="n">unit</span><span class="o">=</span><span class="n">ureg</span><span class="o">.</span><span class="n">meter</span> <span class="o">**</span> <span class="mi">2</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This way bim2sim knows where to look for in the IFC file and which function to
use if no information exists in the IFC file. Also the unit in which the value
should be stored is provided as m².  See
<a class="reference internal" href="#_get_value"><span class="xref myst">_get_value function of attribute</span></a> documentation for more detailed
description which other ways are implemented to obtain a value.</p>
</section>
<section id="how-are-the-attributes-managed">
<h2>How are the attributes managed?<a class="headerlink" href="#how-are-the-attributes-managed" title="Permalink to this heading"></a></h2>
<p>To manage the different attributes every bim2sim <a class="reference internal" href="#element"><span class="xref myst">element</span></a> instance
owns an instance of the <a class="reference internal" href="../../code/bim2sim.elements.mapping.html#bim2sim.elements.mapping.attribute.AttributeManager" title="bim2sim.elements.mapping.attribute.AttributeManager"><span class="xref myst py py-class">AttributeManager</span></a> which is stored under <code class="docutils literal notranslate"><span class="pre">element.attributes</span></code>.
This manager manages the values and current status of the <a class="reference internal" href="#"><span class="std std-doc">Attributes</span></a>.</p>
<p>If an information can’t be obtained by the implemented ways in
<a class="reference internal" href="#_get_value"><span class="xref myst">_get_value function of attribute</span></a> of attribute its status will be
changed to <code class="docutils literal notranslate"><span class="pre">NOT_AVAILABLE</span></code>. As some information are mandatory to parametrize a
simulation model, we implemented the concept of <a class="reference internal" href="../../code/bim2sim.kernel.decision.html#bim2sim.kernel.decision.Decision" title="bim2sim.kernel.decision.Decision"><span class="xref myst py py-class">Decisions</span></a>
which is basically a structured way to obtain information from the user. To make
sure that all relevant information exists, a parameter can be
<a class="reference internal" href="../../code/bim2sim.elements.html#bim2sim.elements.base_elements.Element.request" title="bim2sim.elements.base_elements.Element.request"><span class="xref myst py py-meth">requested</span></a>. This way a <a class="reference internal" href="../../code/bim2sim.kernel.decision.html#bim2sim.kernel.decision.Decision" title="bim2sim.kernel.decision.Decision"><span class="xref myst py py-class">Decisions</span></a> will be created if the
status of the corresponding attribute is <code class="docutils literal notranslate"><span class="pre">NOT_AVAILABLE</span></code>.</p>
<p>// todo: flow chart with mermaid. To use mermaid: https://github.com/mgaitan/sphinxcontrib-mermaid#markdown-support</p>
<p>The <a class="reference internal" href="../../code/bim2sim.elements.mapping.html#bim2sim.elements.mapping.attribute.AttributeManager" title="bim2sim.elements.mapping.attribute.AttributeManager"><span class="xref myst py py-class">AttributeManager</span></a> uses the status of each attribute to
store if an attribute was already requested. To trigger all decisions for the
already requested attributes to finally obtain the corresponding values the
final tasks before exporting to a simulation model should always trigger the
<a class="reference internal" href="../../code/bim2sim.elements.html#bim2sim.elements.base_elements.Element.get_pending_attribute_decisions" title="bim2sim.elements.base_elements.Element.get_pending_attribute_decisions"><code class="xref myst py py-meth docutils literal notranslate"><span class="pre">get_pending_attribute_decisions</span></code></a> function of <a class="reference internal" href="#element"><span class="xref myst">element</span></a>. This
implementation was made to bundle the decisions at the end of the process if
possible.</p>
</section>
<section id="when-to-use-attributes">
<h2>When to use <code class="docutils literal notranslate"><span class="pre">attributes</span></code>?<a class="headerlink" href="#when-to-use-attributes" title="Permalink to this heading"></a></h2>
<p>There are multiple ways to calculate and store information in a bim2sim
<code class="docutils literal notranslate"><span class="pre">element</span></code>. Following you will find some guidelines when to use which way.</p>
<section id="bim2sim-attribute">
<h3>bim2sim <code class="docutils literal notranslate"><span class="pre">attribute</span></code><a class="headerlink" href="#bim2sim-attribute" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li></li>
</ul>
</section>
<section id="class-attributes">
<h3>Class attributes<a class="headerlink" href="#class-attributes" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>When every instance of the class has the same value</p></li>
<li><p>When you want to share the value of this attribute through all instances of this class</p></li>
</ul>
<p>An example would be the counter of created instances of this class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="n">instance_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">MyClass</span><span class="o">.</span><span class="n">instance_count</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</section>
<section id="instance-attributes">
<h3>Instance attributes<a class="headerlink" href="#instance-attributes" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>If every instance of the class should have it’s own value</p></li>
<li><p>If the value is always needed and will stay the same for the lifetime of the
object
The most common way is to put information into instance attributes by add a
value or the link to a method to calculate this value to the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> function:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyElement</span><span class="p">(</span><span class="n">element</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>  <span class="c1"># constant instance attribute</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calc_valuve_2</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">calc_value_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">1</span><span class="o">+</span><span class="mi">2</span>
</pre></div>
</div>
<p>This way should</p>
<ol class="arabic simple">
<li><p>The here mentioned <code class="docutils literal notranslate"><span class="pre">attribute</span></code> system</p></li>
<li><p>calculation through function call in <strong>init</strong>.py</p></li>
</ol>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="elements.html" class="btn btn-neutral float-left" title="Elements" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="finder.html" class="btn btn-neutral float-right" title="Finder" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, RWTH Aachen University, EBC &amp; E3D; ROM Technik GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>